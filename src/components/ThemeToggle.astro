<button
  id="theme-toggle"
  type="button"
  class="w-10 h-10 flex items-center justify-center rounded-full bg-white dark:bg-gray-800 shadow-md transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-700"
  aria-label="Cambiar tema"
>
  <!-- Sol -->
  <svg id="theme-toggle-light-icon" class="w-6 h-6 text-gray-700 dark:hidden transition-opacity duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
    <circle cx="12" cy="12" r="5" fill="#fff" stroke="#222" stroke-width="1.5" />
    <g stroke="#222" stroke-width="1.5">
      <line x1="12" y1="2" x2="12" y2="5" />
      <line x1="12" y1="19" x2="12" y2="22" />
      <line x1="2" y1="12" x2="5" y2="12" />
      <line x1="19" y1="12" x2="22" y2="12" />
      <line x1="4.22" y1="4.22" x2="6.34" y2="6.34" />
      <line x1="17.66" y1="17.66" x2="19.78" y2="19.78" />
      <line x1="4.22" y1="19.78" x2="6.34" y2="17.66" />
      <line x1="17.66" y1="6.34" x2="19.78" y2="4.22" />
    </g>
  </svg>
  <!-- Luna -->
  <svg id="theme-toggle-dark-icon" class="w-6 h-6 text-gray-200 hidden dark:block transition-opacity duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
    <path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" fill="#222" stroke="#222" stroke-width="1.5" />
  </svg>
</button>

<script>
  const themeToggleBtn = document.getElementById('theme-toggle');
  const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
  const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');

  function toggleIcons(isDark) {
    if (isDark) {
      themeToggleLightIcon?.classList.add('hidden');
      themeToggleDarkIcon?.classList.remove('hidden');
      themeToggleDarkIcon?.classList.add('dark:block');
    } else {
      themeToggleLightIcon?.classList.remove('hidden');
      themeToggleDarkIcon?.classList.add('hidden');
      themeToggleDarkIcon?.classList.remove('dark:block');
    }
  }

  function toggleTheme() {
    const isDark = !document.documentElement.classList.contains('dark');
    document.documentElement.classList.toggle('dark', isDark);
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    toggleIcons(isDark);
  }

  // Inicializar
  const isDarkInit = localStorage.getItem('theme') === 'dark' ||
    (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches);
  document.documentElement.classList.toggle('dark', isDarkInit);
  toggleIcons(isDarkInit);

  themeToggleBtn?.addEventListener('click', toggleTheme);
</script> 